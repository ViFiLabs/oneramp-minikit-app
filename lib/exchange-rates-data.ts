// Client-side exchange rates data for instant access
export const exchangeRatesData = {
  "lastUpdated": "2025-10-17T11:04:49.499Z",
  "exchangeRates": {
    "NG": {
      "buying": {
        "momo": {
          "country": "NG",
          "exchange": "1500.979",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "1500.979",
            "chargeFeeInFiat": "47.581",
            "chargeFeeInUsd": "0.031",
            "exchangeRate": 1500.979,
            "providerPayoutAmount": "1548.560",
            "gasFeeInFiat": "30.019"
          }
        },
        "bank": {
          "country": "NG",
          "exchange": "1500.979",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "1500.979",
            "chargeFeeInFiat": "47.581",
            "chargeFeeInUsd": "0.031",
            "exchangeRate": 1500.979,
            "providerPayoutAmount": "1548.560",
            "gasFeeInFiat": "30.019"
          }
        }
      },
      "selling": {
        "momo": {
          "country": "NG",
          "exchange": "1451.939",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "1451.939",
            "chargeFeeInFiat": "46.026",
            "chargeFeeInUsd": "0.031",
            "exchangeRate": 1451.939,
            "providerPayoutAmount": "1405.912",
            "gasFeeInFiat": "29.038"
          }
        },
        "bank": {
          "country": "NG",
          "exchange": "1451.939",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "1451.939",
            "chargeFeeInFiat": "46.026",
            "chargeFeeInUsd": "0.031",
            "exchangeRate": 1451.939,
            "providerPayoutAmount": "1405.912",
            "gasFeeInFiat": "29.038"
          }
        }
      }
    },
    "KE": {
      "buying": {
        "momo": {
          "country": "KE",
          "exchange": "130.575",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "130.575",
            "chargeFeeInFiat": "3.408",
            "chargeFeeInUsd": "0.026",
            "exchangeRate": 130.575,
            "providerPayoutAmount": "133.983",
            "gasFeeInFiat": "2.611"
          }
        },
        "bank": {
          "country": "KE",
          "exchange": "130.575",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "130.575",
            "chargeFeeInFiat": "3.408",
            "chargeFeeInUsd": "0.026",
            "exchangeRate": 130.575,
            "providerPayoutAmount": "133.983",
            "gasFeeInFiat": "2.611"
          }
        }
      },
      "selling": {
        "momo": {
          "country": "KE",
          "exchange": "127.252",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "127.252",
            "chargeFeeInFiat": "3.321",
            "chargeFeeInUsd": "0.026",
            "exchangeRate": 127.252,
            "providerPayoutAmount": "123.930",
            "gasFeeInFiat": "2.545"
          }
        },
        "bank": {
          "country": "KE",
          "exchange": "127.252",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "127.252",
            "chargeFeeInFiat": "3.321",
            "chargeFeeInUsd": "0.026",
            "exchangeRate": 127.252,
            "providerPayoutAmount": "123.930",
            "gasFeeInFiat": "2.545"
          }
        }
      }
    },
    "UG": {
      "buying": {
        "momo": {
          "country": "UG",
          "exchange": "3502.02",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "3502.020",
            "chargeFeeInFiat": "112.064",
            "chargeFeeInUsd": "0.031",
            "exchangeRate": 3502.02,
            "providerPayoutAmount": "3614.084",
            "gasFeeInFiat": "70.040"
          }
        },
        "bank": {
          "country": "UG",
          "exchange": "3502.02",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "3502.020",
            "chargeFeeInFiat": "112.064",
            "chargeFeeInUsd": "0.031",
            "exchangeRate": 3502.02,
            "providerPayoutAmount": "3614.084",
            "gasFeeInFiat": "70.040"
          }
        }
      },
      "selling": {
        "momo": {
          "country": "UG",
          "exchange": "3393.325",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "3393.325",
            "chargeFeeInFiat": "108.586",
            "chargeFeeInUsd": "0.032",
            "exchangeRate": 3393.325,
            "providerPayoutAmount": "3284.738",
            "gasFeeInFiat": "67.866"
          }
        },
        "bank": {
          "country": "UG",
          "exchange": "3393.325",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "3393.325",
            "chargeFeeInFiat": "108.586",
            "chargeFeeInUsd": "0.032",
            "exchangeRate": 3393.325,
            "providerPayoutAmount": "3284.738",
            "gasFeeInFiat": "67.866"
          }
        }
      }
    },
    "GHA": {
      "buying": {
        "momo": {
          "exchange": 0,
          "country": "GHA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        },
        "bank": {
          "exchange": 0,
          "country": "GHA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        }
      },
      "selling": {
        "momo": {
          "exchange": 0,
          "country": "GHA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        },
        "bank": {
          "exchange": 0,
          "country": "GHA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        }
      }
    },
    "ZM": {
      "buying": {
        "momo": {
          "exchange": 0,
          "country": "ZM",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        },
        "bank": {
          "exchange": 0,
          "country": "ZM",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        }
      },
      "selling": {
        "momo": {
          "exchange": 0,
          "country": "ZM",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        },
        "bank": {
          "exchange": 0,
          "country": "ZM",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        }
      }
    },
    "TZ": {
      "buying": {
        "momo": {
          "country": "TZ",
          "exchange": "2403.4",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "2403.4",
            "chargeFeeInFiat": "111.758",
            "chargeFeeInUsd": "0.046",
            "exchangeRate": 2403.4,
            "providerPayoutAmount": "2515.158",
            "gasFeeInFiat": "48.068"
          }
        },
        "bank": {
          "country": "TZ",
          "exchange": "2403.4",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "2403.4",
            "chargeFeeInFiat": "111.758",
            "chargeFeeInUsd": "0.046",
            "exchangeRate": 2403.4,
            "providerPayoutAmount": "2515.158",
            "gasFeeInFiat": "48.068"
          }
        }
      },
      "selling": {
        "momo": {
          "country": "TZ",
          "exchange": "2515.151",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "2515.151",
            "chargeFeeInFiat": "116.954",
            "chargeFeeInUsd": "0.046",
            "exchangeRate": 2515.151,
            "providerPayoutAmount": "2398.196",
            "gasFeeInFiat": "50.303"
          }
        },
        "bank": {
          "country": "TZ",
          "exchange": "2515.151",
          "feesAndRatesResponse": {
            "cryptoAmount": "1",
            "fiatAmount": "2515.151",
            "chargeFeeInFiat": "116.954",
            "chargeFeeInUsd": "0.046",
            "exchangeRate": 2515.151,
            "providerPayoutAmount": "2398.196",
            "gasFeeInFiat": "50.303"
          }
        }
      }
    },
    "ZA": {
      "buying": {
        "momo": {
          "exchange": 0,
          "country": "ZA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        },
        "bank": {
          "exchange": 0,
          "country": "ZA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        }
      },
      "selling": {
        "momo": {
          "exchange": 0,
          "country": "ZA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        },
        "bank": {
          "exchange": 0,
          "country": "ZA",
          "conversionResponse": {
            "success": false,
            "chargeFeeInFiat": 0,
            "chargeFeeInUsd": 0,
            "exchangeRate": 0,
            "fiatAmount": 0,
            "gasFeeInFiat": 0
          }
        }
      }
    }
  }
};

// Fixed cross rates: 1 NGN -> Local currency units
export const NGN_TO_LOCAL_RATES: Record<string, number> = {
  UG: 2.319,
  KE: 0.08645,
  TZ: 1.655,
  GHA: 0.008266,
};

export function getNgnToLocalRate(country: string): number | undefined {
  return NGN_TO_LOCAL_RATES[country];
}

// Instant client-side exchange rate getter
export function getExchangeRateClient(
  country: string,
  orderType: "buying" | "selling" = "selling",
  providerType: "momo" | "bank" = "momo"
) {
  if (!country) return null;

  const countryRates = exchangeRatesData.exchangeRates[country];
  if (
    countryRates &&
    countryRates[orderType] &&
    countryRates[orderType][providerType]
  ) {
    return countryRates[orderType][providerType];
  }

  return null;
}

// Dynamic cNGN helpers based on current exchange rates
/**
 * Get the default prefill amount for cNGN (equivalent to 1 USD)
 * @returns cNGN amount equal to 1 USD based on current exchange rate
 */
export function getCNGNDefaultAmount(): number {
  const rate = getExchangeRateClient("NG", "selling", "momo");
  return rate?.exchange || 1472.57; // Fallback to current rate if data unavailable
}

/**
 * Get the KYC bypass threshold for cNGN (equivalent to 1000 USD)
 * This threshold allows MoMo transactions under this amount to bypass full KYC
 * @returns cNGN amount equal to 1000 USD based on current exchange rate
 */
export function getCNGNKYCThreshold(): number {
  const rate = getExchangeRateClient("NG", "selling", "momo");
  const usdAmount = 1000; // $1000 threshold
  return (rate?.exchange || 1472.57) * usdAmount;
}

/**
 * Get the cNGN to NGN exchange rate
 * Note: cNGN is NOT pegged 1:1 to NGN - there's a small platform fee
 * Based on API data, 1 cNGN ≈ 0.9966 NGN (approximately 99.66% of NGN value)
 * @returns The exchange rate for cNGN -> NGN conversion
 */
export function getCNGNToNGNRate(): number {
  // The platform takes a small fee, so cNGN trades slightly below NGN
  // This rate is derived from: exchange / amountPaid from quote-out response
  // Example: 1467.5338106 / 1472.57 = 0.996577
  return 0.996577; // ~0.34% platform fee
}

/**
 * Get the NGN to cNGN exchange rate (inverse of cNGN to NGN)
 * @returns The exchange rate for NGN -> cNGN conversion
 */
export function getNGNToCNGNRate(): number {
  return 1 / getCNGNToNGNRate(); // ~1.00344
}


